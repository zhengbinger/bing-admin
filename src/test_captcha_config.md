# 验证码配置功能测试文档

## 功能概述

验证码配置功能允许管理员根据不同的登录渠道配置不同的验证码策略，主要包括以下功能：

1. 前端展示验证码前通过接口检查配置是否开启
2. 未开启验证码时无需展示和处理验证码提交
3. 验证码可以根据不同渠道配置，一个渠道仅能使用一种验证码策略
4. 提供验证码配置管理页面，支持增删改查操作

## 测试准备

1. 确保后端已实现验证码配置相关接口
2. 确保前端已完成验证码配置功能的开发
3. 登录系统，进入系统管理模块

## 测试步骤

### 1. 验证码配置管理页面测试

#### 1.1 页面访问
- 预期结果：可以正常访问验证码配置管理页面
- 测试方法：在系统管理菜单中点击"验证码配置"菜单项

#### 1.2 添加配置
- 预期结果：可以成功添加验证码配置
- 测试方法：
  1. 点击"添加配置"按钮
  2. 选择登录渠道（如：网页端）
  3. 选择验证码类型（如：图片验证码）
  4. 设置是否启用（默认启用）
  5. 设置过期时间（如：300秒）
  6. 输入配置参数（JSON格式）
  7. 点击"确定"按钮

#### 1.3 编辑配置
- 预期结果：可以成功编辑验证码配置
- 测试方法：
  1. 点击某条配置的"编辑"按钮
  2. 修改配置参数
  3. 点击"确定"按钮

#### 1.4 删除配置
- 预期结果：可以成功删除验证码配置
- 测试方法：
  1. 点击某条配置的"删除"按钮
  2. 在确认对话框中点击"确定"按钮

#### 1.5 启用/禁用配置
- 预期结果：可以成功切换配置的启用状态
- 测试方法：
  1. 点击某条配置的启用状态开关
  2. 观察状态变化

### 2. 登录页面验证码显示测试

#### 2.1 验证码开启状态
- 预期结果：登录页面显示验证码输入区域
- 测试方法：
  1. 在验证码配置页面为某个渠道（如：网页端）启用验证码
  2. 打开登录页面，选择该渠道
  3. 观察是否显示验证码

#### 2.2 验证码关闭状态
- 预期结果：登录页面不显示验证码输入区域
- 测试方法：
  1. 在验证码配置页面为某个渠道（如：网页端）禁用验证码
  2. 打开登录页面，选择该渠道
  3. 观察是否不显示验证码

#### 2.3 渠道切换测试
- 预期结果：切换渠道时，验证码显示状态根据该渠道的配置自动切换
- 测试方法：
  1. 为网页端渠道启用验证码
  2. 为移动端渠道禁用验证码
  3. 在登录页面切换渠道，观察验证码显示状态变化

### 3. 验证码提交验证测试

#### 3.1 验证码开启时提交登录
- 预期结果：必须输入正确的验证码才能登录成功
- 测试方法：
  1. 为某个渠道启用验证码
  2. 在登录页面输入用户名、密码、选择该渠道
  3. 输入错误的验证码，点击登录
  4. 观察是否提示验证码错误
  5. 输入正确的验证码，点击登录
  6. 观察是否登录成功

#### 3.2 验证码关闭时提交登录
- 预期结果：无需输入验证码即可登录
- 测试方法：
  1. 为某个渠道禁用验证码
  2. 在登录页面输入用户名、密码、选择该渠道
  3. 点击登录
  4. 观察是否无需验证码即可登录

## 预期结果

1. 验证码配置管理页面可以正常进行增删改查操作
2. 登录页面根据渠道的验证码配置自动显示或隐藏验证码
3. 切换渠道时，验证码显示状态会自动更新
4. 验证码开启时必须输入正确的验证码才能登录
5. 验证码关闭时无需输入验证码即可登录

## 注意事项

1. 配置参数必须是有效的JSON格式
2. 每个渠道只能配置一种验证码策略
3. 验证码过期时间应设置合理，不宜过长或过短
4. 配置变更后需刷新登录页面才能生效
5. 如果获取验证码配置失败，默认不启用验证码

## 测试环境

- 浏览器：Chrome 90+
- 分辨率：1920x1080
- 网络环境：局域网

## 测试人员

- 测试日期：
- 测试人员：
- 测试结果：
